angular.module("uiMaya",[]).value("uiMayaConfig",{}).directive("uiMaya",["uiMayaConfig",function(a){a=a||{};var b=0;return{priority:10,require:"ngModel",link:function(c,d,e,f){var g,h,i,j=function(){f.$setViewValue(d.val()),c.$root.$$phase||c.$apply()};if(e.id||e.$set("id","uiMaya"+b++),g=e.uiMaya?c.$eval(e.uiMaya):{},g.setup){var k=g.setup;delete g.setup}h={setup:function(a){a.on("init",function(a){f.$render(),f.$setPristine()}),a.on("ExecCommand",function(b){a.save(),j()}),a.on("KeyUp",function(b){a.save(),j()}),a.on("SetContent",function(b){b.initial||f.$viewValue===b.content||(a.save(),j())}),a.on("blur",function(a){d.blur()}),a.on("ObjectResized",function(b){a.save(),j()}),k&&k(a)},mode:"exact",elements:e.id},angular.extend(h,a,g),setTimeout(function(){maya.init(h)}),f.$render=function(){i||(i=maya.get(e.id)),i&&i.setContent(f.$viewValue||"")},c.$on("$destroy",function(){i||(i=maya.get(e.id)),i&&(i.remove(),i=null)})}}}]);